# vim: set filetype=neomuttrc
###########
# General #
###########
bind generic \: tag-prefix
bind generic \; enter-command
bind index,pager K previous-entry
bind index,pager J next-entry
bind index,pager g noop
bind index,pager \Cu half-up
bind index,pager \Cd half-down
bind index,pager @ compose-to-sender
bind index,pager R group-reply
bind index,pager D purge-message
bind index,pager m noop
bind index,pager e noop
macro index,pager o "<shell-escape>sync-mail -a<enter>" "Sync mail"

# Sidebar Navigation
bind index,pager \CJ sidebar-next
bind index,pager \CK sidebar-prev
bind index,pager \CL sidebar-open

# Composing
bind index,pager mc mail

# Go somewhere
macro index,pager gW "<enter-command>source $my_config_dir/accounts/work<Enter><change-folder>+work/Inbox<Enter>" "Go to work"
macro index,pager gP "<enter-command>source $my_config_dir/accounts/personal<Enter><change-folder>+personal/Inbox<Enter>" "Go to personal"

#########
# Index #
#########
bind index gg first-entry
bind index G last-entry
bind index k previous-entry
bind index j next-entry
bind index <tab> sync-mailbox
bind index <space> collapse-thread

#########
# Pager #
#########
bind pager j next-line
bind pager k previous-line
bind pager gg top
bind pager G bottom

# Extraction
# Save all attachments
macro pager ea "<pipe-message> ripmime -i - -d $HOME/Downloads/attachments && rm $HOME/Downloads/attachments/textfile* && echo 'Saved attachments to $HOME/Downloads/attachments'<Enter>" "Save all non-text attachments using ripmime"
# opening urls with urlscan
macro pager eu "<pipe-message> furls<Enter>" "call furls to extract URLs out of a message"

##########
# Editor #
##########
bind editor <Tab> complete-query
